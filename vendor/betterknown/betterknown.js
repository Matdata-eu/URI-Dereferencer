/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/betterknown@1.1.1/dist/betterknown.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t=Object.defineProperty,e=(e,o,r)=>(((e,o,r)=>{o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r})(e,"symbol"!=typeof o?o+"":o,r),r);const o=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"],r=["ZM","Z","M"],n="EMPTY";class i{constructor(t){e(this,"value"),e(this,"position"),this.value=t.toUpperCase(),this.position=0}match(t){this.skipWhitespaces();for(const e of t){const t=e.toUpperCase();if(this.value.startsWith(t,this.position))return this.position+=t.length,e}return null}matchRegex(t){this.skipWhitespaces();for(const e of t){const t=this.value.substring(this.position).match(e);if(t)return this.position+=t[0].length,t}return null}isMatch(t){return this.skipWhitespaces(),!!this.value.startsWith(t,this.position)&&(this.position+=t.length,!0)}matchType(){const t=this.match(o);if(!t)throw new Error("Expected geometry type");return t}matchDimension(){switch(this.match(r)){case"ZM":return{hasZ:!0,hasM:!0};case"Z":return{hasZ:!0,hasM:!1};case"M":return{hasZ:!1,hasM:!0};default:return{hasZ:!1,hasM:!1}}}expectGroupStart(){if(!this.isMatch("("))throw new Error("Expected group start")}expectGroupEnd(){if(!this.isMatch(")"))throw new Error("Expected group end")}matchCoordinate(t){let e;if(e=t.hasZ&&t.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+(\S*)\s+([^\s,)]*)/i]):t.hasZ||t.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+([^\s,)]*)/i]):this.matchRegex([/^(\S*)\s+([^\s,)]*)/i]),!e)throw new Error("Expected coordinates");const o=t.hasZ&&t.hasM?[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])]:t.hasZ?[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]:(t.hasM,[parseFloat(e[1]),parseFloat(e[2])]);if(!t.srid||4326===t.srid)return o;if("http://www.opengis.net/def/crs/epsg/0/4326"===t.srid)return 3===o.length?[o[1],o[0],o[2]]:[o[1],o[0]];if(!t.proj)throw new Error(`EWKT data in an unknown SRID (${t.srid}) was provided, but a proj function was not`);return t.proj("string"==typeof t.srid?t.srid:`EPSG:${t.srid}`,"EPSG:4326",o)}matchCoordinates(t){const e=[];do{const o=this.isMatch("(");e.push(this.matchCoordinate(t)),o&&this.expectGroupEnd()}while(this.isMatch(","));return e}skipWhitespaces(){for(;this.position<this.value.length&&" "===this.value[this.position];)this.position++}}function s(t){return t.join(" ")}function a(t){return void 0===t?" ":3===t.length?" Z ":" "}function c(t,e){let o=null;const r=t.matchRegex([/^SRID=(\d+);/i]);if(r)o=parseInt(r[1],10);else{const e=t.matchRegex([/^<([^>]+)>/i]);e&&(o=e[1].toLowerCase())}const i=t.matchType(),s=t.matchDimension(),a={...e,srid:o,hasZ:s.hasZ,hasM:s.hasM};switch(i){case"Point":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"Point",coordinates:[]};t.expectGroupStart();const o=t.matchCoordinate(e);return t.expectGroupEnd(),{type:"Point",coordinates:o}})(t,a);case"LineString":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"LineString",coordinates:[]};t.expectGroupStart();const o=t.matchCoordinates(e);return t.expectGroupEnd(),{type:"LineString",coordinates:o}})(t,a);case"Polygon":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"Polygon",coordinates:[]};const o=[];for(t.expectGroupStart(),t.expectGroupStart(),o.push(t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch(",");)t.expectGroupStart(),o.push(t.matchCoordinates(e)),t.expectGroupEnd();return t.expectGroupEnd(),{type:"Polygon",coordinates:o}})(t,a);case"MultiPoint":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"MultiPoint",coordinates:[]};t.expectGroupStart();const o=t.matchCoordinates(e);return t.expectGroupEnd(),{type:"MultiPoint",coordinates:o}})(t,a);case"MultiLineString":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"MultiLineString",coordinates:[]};t.expectGroupStart();const o=[];do{t.expectGroupStart(),o.push(t.matchCoordinates(e)),t.expectGroupEnd()}while(t.isMatch(","));return t.expectGroupEnd(),{type:"MultiLineString",coordinates:o}})(t,a);case"MultiPolygon":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"MultiPolygon",coordinates:[]};t.expectGroupStart();const o=[];do{t.expectGroupStart();const r=[],n=[];for(t.expectGroupStart(),r.push.apply(r,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch(",");)t.expectGroupStart(),n.push(t.matchCoordinates(e)),t.expectGroupEnd();o.push([r,...n]),t.expectGroupEnd()}while(t.isMatch(","));return t.expectGroupEnd(),{type:"MultiPolygon",coordinates:o}})(t,a);case"GeometryCollection":return((t,e)=>{if(t.isMatch(n))return e.emptyAsNull?null:{type:"GeometryCollection",geometries:[]};t.expectGroupStart();const o=[];do{const r=c(t,e);r&&o.push(r)}while(t.isMatch(","));return t.expectGroupEnd(),{type:"GeometryCollection",geometries:o}})(t,a)}}function u(t){switch(t.type){case"Point":return function(t){return 0===t.coordinates.length?"POINT EMPTY":`POINT${a(t.coordinates)}(${s(t.coordinates)})`}(t);case"LineString":return function(t){if(0===t.coordinates.length)return"LINESTRING EMPTY";const e=`(${t.coordinates.map((t=>s(t))).join(",")})`;return`LINESTRING${a(t.coordinates[0])}${e}`}(t);case"MultiPoint":return function(t){return 0===t.coordinates.length?"MULTIPOINT EMPTY":`MULTIPOINT${a(t.coordinates[0])}(${t.coordinates.map((t=>s(t))).join(",")})`}(t);case"GeometryCollection":return function(t){return 0===t.geometries.length?"GEOMETRYCOLLECTION EMPTY":`GEOMETRYCOLLECTION(${t.geometries.map((t=>u(t))).join(",")})`}(t);case"Polygon":return function(t){var e;if(0===t.coordinates.length)return"POLYGON EMPTY";const o=`(${t.coordinates.map((t=>`(${t.map((t=>s(t)))})`))})`;return`POLYGON${a(null==(e=t.coordinates[0])?void 0:e[0])}${o}`}(t);case"MultiPolygon":return function(t){var e,o;if(0===t.coordinates.length)return"MULTIPOLYGON EMPTY";const r=`(${t.coordinates.map((t=>`(${t.map((t=>`(${t.map((t=>s(t)))})`))})`))})`;return`MULTIPOLYGON${a(null==(o=null==(e=t.coordinates[0])?void 0:e[0])?void 0:o[0])}${r}`}(t);case"MultiLineString":return function(t){if(0===t.coordinates.length)return"MULTILINESTRING EMPTY";const e=`(${t.coordinates.map((t=>`(${t.map((t=>s(t)))})`))})`;return`MULTILINESTRING${a(t.coordinates[0][0])}${e}`}(t)}}function p(t,e={emptyAsNull:!0}){return c(new i(t),e)}export{u as geoJSONToWkt,p as wktToGeoJSON};export default null;
//# sourceMappingURL=/sm/5b9fa47a02c59cafffbc82023d3d8de1f515ff1d62edbafbb20c5aa5765cde53.map